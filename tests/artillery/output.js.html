<!DOCTYPE html>
<html>
<head>
  <title>Artillery report</title>
  <script src='https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.0/d3.min.js' charset='utf-8'></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/metrics-graphics/2.6.0/metricsgraphics.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/metrics-graphics/2.6.0/metricsgraphics.min.js"></script>

  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,700' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=PT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>
  <link href='https://netdna.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.css' rel='stylesheet' type='text/css'>
  <link href='https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css' rel='stylesheet' type='text/css'>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.10.1/lodash.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/ace.js" charset="utf-8"></script>

  <style>
  body, p, li {
    font-family: sans-serif;
    font-size: 10pt;
  }

  h1 {
    font-size: 18pt;
    font-weight: bold;
  }

  #errorsContainer > p {
    color: #009900;
  }

  #footer {
    padding: 1em;
    font-size: 0.8em;
    color: #999;
    text-align: center;
    margin-top: 1em;
    background-color: #eee;
  }
  #editor {
    font-size: 8pt;
    height: 20em;
  }
  </style>

  <script>
  window.Report = {
  "aggregate": {
    "timestamp": "2018-03-12T15:40:39.730Z",
    "scenariosCreated": 60,
    "scenariosCompleted": 60,
    "requestsCompleted": 60,
    "latency": {
      "min": 76.2,
      "max": 363.3,
      "median": 106.2,
      "p95": 308.5,
      "p99": 363.3
    },
    "rps": {
      "count": 60,
      "mean": 1.01
    },
    "scenarioDuration": {
      "min": 78,
      "max": 365.3,
      "median": 108,
      "p95": 310.2,
      "p99": 365.2
    },
    "scenarioCounts": {
      "Add usage log": 28,
      "View app usage": 32
    },
    "errors": {},
    "codes": {
      "200": 32,
      "201": 28
    },
    "matches": 0,
    "customStats": {},
    "phases": [
      {
        "duration": 60,
        "arrivalRate": 1,
        "name": "Warm up"
      }
    ]
  },
  "intermediate": [
    {
      "timestamp": "2018-03-12T15:39:49.223Z",
      "scenariosCreated": 9,
      "scenariosCompleted": 9,
      "requestsCompleted": 9,
      "latency": {
        "min": 76.3,
        "max": 161.8,
        "median": 88.6,
        "p95": null,
        "p99": null
      },
      "rps": {
        "count": 9,
        "mean": 1
      },
      "scenarioDuration": {
        "min": 78.7,
        "max": 181.7,
        "median": 91.7,
        "p95": null,
        "p99": null
      },
      "scenarioCounts": {
        "Add usage log": 6,
        "View app usage": 3
      },
      "errors": {},
      "codes": {
        "200": 3,
        "201": 6
      },
      "matches": 0,
      "latencies": [
        [
          1520869180404,
          "90f75f92-4874-423b-8050-7cbeeb633c43",
          152957780,
          201
        ],
        [
          1520869181315,
          "22dc2d5c-6abf-4046-a31d-b29cb6e84451",
          87685426,
          200
        ],
        [
          1520869182304,
          "779d54de-0fcd-4c57-9bf6-d59eedfcc740",
          78566901,
          201
        ],
        [
          1520869183388,
          "0ea4e72d-3bb1-46d0-8ec6-6410073c0049",
          161792615,
          201
        ],
        [
          1520869184344,
          "7bfab8ac-2972-495f-8fbb-859c514bb95b",
          118974820,
          201
        ],
        [
          1520869185302,
          "aa63822d-e88a-4d0e-a25e-f23e10eb939e",
          76315542,
          201
        ],
        [
          1520869186314,
          "d09d68ce-0e7b-4c38-8bc9-977a9dd70785",
          88566371,
          200
        ],
        [
          1520869187322,
          "338f24e7-13f9-4ee3-8986-ff69477f392b",
          97100197,
          200
        ],
        [
          1520869188309,
          "273cb20a-eb20-4a48-89b9-d31837e9ba25",
          83318878,
          201
        ]
      ],
      "customStats": {},
      "concurrency": 0,
      "pendingRequests": 0
    },
    {
      "timestamp": "2018-03-12T15:39:59.223Z",
      "scenariosCreated": 10,
      "scenariosCompleted": 10,
      "requestsCompleted": 10,
      "latency": {
        "min": 76.7,
        "max": 130.1,
        "median": 100.8,
        "p95": 130.1,
        "p99": null
      },
      "rps": {
        "count": 10,
        "mean": 1
      },
      "scenarioDuration": {
        "min": 78.2,
        "max": 131.7,
        "median": 102.9,
        "p95": 131.7,
        "p99": null
      },
      "scenarioCounts": {
        "Add usage log": 5,
        "View app usage": 5
      },
      "errors": {},
      "codes": {
        "200": 5,
        "201": 5
      },
      "matches": 0,
      "latencies": [
        [
          1520869189304,
          "2b80fa21-8f96-49e0-acb8-f25b887357d7",
          78779885,
          201
        ],
        [
          1520869190306,
          "1c40ae23-1c40-4eec-bf54-c551987f33a3",
          80721275,
          201
        ],
        [
          1520869191301,
          "df86061e-ece3-44a9-8213-244c3c8d4167",
          76657273,
          201
        ],
        [
          1520869192324,
          "39c218e8-ddc6-4ced-861e-c9339e9cdcf0",
          98622749,
          200
        ],
        [
          1520869193355,
          "a224a87c-94d9-4ef8-83c5-3c86ff26f120",
          130057739,
          200
        ],
        [
          1520869194310,
          "a19bee38-ad8d-49a4-b69e-ece8c1edf217",
          85925918,
          201
        ],
        [
          1520869195329,
          "1f9b5607-23cc-4ffa-a0bc-f96ade6a3c6c",
          103634217,
          201
        ],
        [
          1520869196337,
          "ff8ad048-497d-4e37-b876-222f0e01cb51",
          112771061,
          200
        ],
        [
          1520869197328,
          "8d6795ec-2f3d-4535-85a3-c24743c70fff",
          102943898,
          200
        ],
        [
          1520869198329,
          "3c8c1cdf-64a7-4dbc-b4b7-73d4aa0e90c9",
          103008253,
          200
        ]
      ],
      "customStats": {},
      "concurrency": 0,
      "pendingRequests": 0
    },
    {
      "timestamp": "2018-03-12T15:40:09.224Z",
      "scenariosCreated": 10,
      "scenariosCompleted": 10,
      "requestsCompleted": 10,
      "latency": {
        "min": 82.1,
        "max": 164.8,
        "median": 94.9,
        "p95": 164.8,
        "p99": null
      },
      "rps": {
        "count": 10,
        "mean": 1
      },
      "scenarioDuration": {
        "min": 84.2,
        "max": 166.1,
        "median": 96.4,
        "p95": 166.1,
        "p99": null
      },
      "scenarioCounts": {
        "Add usage log": 6,
        "View app usage": 4
      },
      "errors": {},
      "codes": {
        "200": 4,
        "201": 6
      },
      "matches": 0,
      "latencies": [
        [
          1520869199307,
          "1697308e-24cd-4e82-877c-b47938d9b556",
          82949171,
          201
        ],
        [
          1520869200328,
          "0dd66ee3-dc7c-42ff-98ba-ef60f9cf1006",
          103219721,
          200
        ],
        [
          1520869201307,
          "93459365-cd03-4231-94f3-b3183a123a58",
          82977980,
          201
        ],
        [
          1520869202307,
          "6e956bfb-825b-47fb-98c1-dff474a75ef7",
          82079137,
          201
        ],
        [
          1520869203329,
          "b9bb68ef-e1ad-4d2f-ba3e-e29c65c168d3",
          104638826,
          200
        ],
        [
          1520869204340,
          "46e30f9c-4c26-4302-ae98-8dc0acd6dbaf",
          115967083,
          200
        ],
        [
          1520869205351,
          "eaca21d2-f2ef-4ff8-b32f-918413393129",
          126754119,
          200
        ],
        [
          1520869206389,
          "8cac8e46-07a4-4937-92ea-b89523bf6102",
          164757678,
          201
        ],
        [
          1520869207309,
          "be45c6d3-d0c0-4256-891d-7f64e873efcf",
          84759930,
          201
        ],
        [
          1520869208310,
          "27425db0-cf2a-4770-91f3-48d5554ef998",
          86531441,
          201
        ]
      ],
      "customStats": {},
      "concurrency": 0,
      "pendingRequests": 0
    },
    {
      "timestamp": "2018-03-12T15:40:19.225Z",
      "scenariosCreated": 11,
      "scenariosCompleted": 10,
      "requestsCompleted": 10,
      "latency": {
        "min": 77.8,
        "max": 126.3,
        "median": 109.5,
        "p95": 126.3,
        "p99": null
      },
      "rps": {
        "count": 10,
        "mean": 1
      },
      "scenarioDuration": {
        "min": 79.3,
        "max": 128.4,
        "median": 110.9,
        "p95": 128.4,
        "p99": null
      },
      "scenarioCounts": {
        "View app usage": 7,
        "Add usage log": 4
      },
      "errors": {},
      "codes": {
        "200": 7,
        "201": 3
      },
      "matches": 0,
      "latencies": [
        [
          1520869209334,
          "6a6c501d-c99b-45ce-b98d-5353ebacd4eb",
          109385975,
          200
        ],
        [
          1520869210317,
          "e96b055a-e945-49f5-970f-a7e9d8e6f0d1",
          92729717,
          201
        ],
        [
          1520869211341,
          "15f9d8b9-507c-4c9d-b26a-0f58cd4b5038",
          116623711,
          200
        ],
        [
          1520869212344,
          "2a127465-c9d9-4ac7-9c40-3df33e880924",
          120001042,
          200
        ],
        [
          1520869213333,
          "bf5109a9-e0c6-4f5b-9af1-cd1ba7e26ca0",
          109553884,
          200
        ],
        [
          1520869214351,
          "2a8535d1-84cf-4a12-969c-d7567c64e074",
          126294134,
          200
        ],
        [
          1520869215332,
          "91cb4d40-5ac3-4ec0-aff5-aa239003f944",
          107698995,
          200
        ],
        [
          1520869216306,
          "fb34f306-80d4-4c06-9994-544e0df1e73a",
          82153209,
          201
        ],
        [
          1520869217342,
          "245c2d42-1e4d-487b-b153-ef54c416f72e",
          117379008,
          200
        ],
        [
          1520869218302,
          "8bf11d1f-016c-4824-acb9-58700e2867dd",
          77835254,
          201
        ]
      ],
      "customStats": {},
      "concurrency": 1,
      "pendingRequests": 0
    },
    {
      "timestamp": "2018-03-12T15:40:29.225Z",
      "scenariosCreated": 10,
      "scenariosCompleted": 10,
      "requestsCompleted": 10,
      "latency": {
        "min": 76.2,
        "max": 135.9,
        "median": 81.7,
        "p95": 135.9,
        "p99": null
      },
      "rps": {
        "count": 11,
        "mean": 1.1
      },
      "scenarioDuration": {
        "min": 78,
        "max": 137.8,
        "median": 83.3,
        "p95": 137.8,
        "p99": null
      },
      "scenarioCounts": {
        "View app usage": 5,
        "Add usage log": 5
      },
      "errors": {},
      "codes": {
        "200": 4,
        "201": 6
      },
      "matches": 0,
      "latencies": [
        [
          1520869219303,
          "0e7de5be-23ad-4f54-83d2-f98865b04f20",
          77082429,
          201
        ],
        [
          1520869220348,
          "a507adaf-bad3-4fbc-8c2e-8e83e2a97951",
          122104334,
          200
        ],
        [
          1520869221345,
          "354f645e-75bf-4094-9501-d1220e74a45f",
          121554487,
          200
        ],
        [
          1520869222305,
          "7df91633-bb4d-450f-b73d-cc5e22703ef1",
          80744486,
          201
        ],
        [
          1520869223300,
          "2fd3044d-43fe-42b6-99ed-08aab85edca2",
          76168081,
          201
        ],
        [
          1520869224305,
          "ee8e2e28-14f4-4e9e-822f-2efe80cf04f3",
          79953032,
          201
        ],
        [
          1520869225304,
          "74d22590-2cbd-47cf-85bc-ea96d5eb1509",
          79958608,
          201
        ],
        [
          1520869226357,
          "4b0761da-c804-4ac2-8537-2e4c2307ae98",
          133146795,
          200
        ],
        [
          1520869227360,
          "6374e487-5f7d-483f-9073-a4557bf05e8a",
          135884807,
          200
        ],
        [
          1520869228306,
          "366c6eaf-3844-46f2-b860-5eaacea29b4e",
          82647161,
          201
        ]
      ],
      "customStats": {},
      "concurrency": 1,
      "pendingRequests": 1
    },
    {
      "timestamp": "2018-03-12T15:40:39.226Z",
      "scenariosCreated": 10,
      "scenariosCompleted": 10,
      "requestsCompleted": 10,
      "latency": {
        "min": 119.3,
        "max": 363.3,
        "median": 130,
        "p95": 363.3,
        "p99": null
      },
      "rps": {
        "count": 10,
        "mean": 1.11
      },
      "scenarioDuration": {
        "min": 120.8,
        "max": 365.3,
        "median": 131.7,
        "p95": 365.3,
        "p99": null
      },
      "scenarioCounts": {
        "View app usage": 8,
        "Add usage log": 2
      },
      "errors": {},
      "codes": {
        "200": 9,
        "201": 1
      },
      "matches": 0,
      "latencies": [
        [
          1520869229343,
          "f18ebb2d-0cb2-4711-9ec5-89f580174c38",
          119255030,
          200
        ],
        [
          1520869230345,
          "c246a650-9c3a-426a-a9df-a724ce60699e",
          121136136,
          200
        ],
        [
          1520869231353,
          "05f3c0c6-9d7d-4097-bb77-e884572f465a",
          129586925,
          200
        ],
        [
          1520869232350,
          "b7126472-f7de-4d14-bf7b-5f2913b57104",
          125941929,
          200
        ],
        [
          1520869233359,
          "c6d639b3-1f74-465d-830c-965e62097129",
          133815532,
          200
        ],
        [
          1520869234346,
          "6c8de737-c426-4823-9bbb-3bd1101a1329",
          122818398,
          200
        ],
        [
          1520869235354,
          "2926c7c8-d32e-4dce-8cba-97755ddd072b",
          130349134,
          200
        ],
        [
          1520869236587,
          "36205661-29e4-414f-b882-cd7e829ded2b",
          363323709,
          200
        ],
        [
          1520869237586,
          "bcaf6d14-b05f-4816-8b9e-6e1b31c64b8e",
          362734831,
          201
        ],
        [
          1520869238581,
          "a8a5765e-3cd2-4fcf-ac54-7c4395cd366b",
          357697093,
          200
        ]
      ],
      "customStats": {},
      "concurrency": 1,
      "pendingRequests": 1
    },
    {
      "timestamp": "2018-03-12T15:40:39.725Z",
      "scenariosCreated": 0,
      "scenariosCompleted": 1,
      "requestsCompleted": 1,
      "latency": {
        "min": 259.2,
        "max": 259.2,
        "median": 259.2,
        "p95": null,
        "p99": null
      },
      "rps": {
        "count": 0,
        "mean": null
      },
      "scenarioDuration": {
        "min": 261,
        "max": 261,
        "median": 261,
        "p95": null,
        "p99": null
      },
      "scenarioCounts": {},
      "errors": {},
      "codes": {
        "201": 1
      },
      "matches": 0,
      "latencies": [
        [
          1520869239483,
          "a5fac56c-aa42-45f7-b0cd-4803d7f176cc",
          259235013,
          201
        ]
      ],
      "customStats": {},
      "concurrency": 0,
      "pendingRequests": 0
    }
  ]
};
  </script>

  <style>
      h1 {
        line-height: 200%;
      }

      body {
          background-color: #fcfcfc;
      }

      .container {
          width: 100%;
          min-width: 960px;
      }
  </style>


</head>
<body>

<div class="container">

<div class="row" id="header">
  <div class="col-lg-4 col-lg-offset-4">
    <pre style="font-size: 5pt; background-color: #fcfcfc; border: none;">
            _   _ _ _                                                _
  __ _ _ __| |_(_) | | ___ _ __ _   _      _ __ ___ _ __   ___  _ __| |_
 / _` | '__| __| | | |/ _ \ '__| | | |    | '__/ _ \ '_ \ / _ \| '__| __|
| (_| | |  | |_| | | |  __/ |  | |_| |    | | |  __/ |_) | (_) | |  | |_
 \__,_|_|   \__|_|_|_|\___|_|   \__, |    |_|  \___| .__/ \___/|_|   \__|
                                |___/              |_|

    </pre>
  </div>
</div>

<div class="row">
  <div class="col-lg-12">
    <h1 class="text-center" id="page-title">Test run on <span id="timestamp">date</span></h1>
  </div>
</div>

<div class="row">
  <div class="col-lg-3">
    <p><strong>Summary</strong></p>
    <table class="table table-bordered table-hover table-condensed">
      <tbody>
        <tr>
          <td>Test duration</td>
          <td><span id="testDuration">0</span> sec</td>
        </tr>
        <tr>
          <td>Scenarios created</td>
          <td><span id="scenariosCreated">0</span></td>
        </tr>

        <tr>
          <td>Scenarios completed</td>
          <td><span id="scenariosCompleted">0</span></td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="col-lg-5" id="scenarioCountsContainer">
    <div>
      <strong>Scenario counts:</strong>

      <p></p>

      <table class="table table-bordered table-hover table-condensed" id="scenarioCounts">
      </table>
    </div>
  </div>

  <div class="col-lg-1">
    <div id="codesContainer">
      <strong>Codes</strong>

      <p></p>

      <table class="table table-bordered table-hover table-condensed" id="codes">
      </table>
    </div>
  </div>

  <div class="col-lg-3">
    <div id="errorsContainer">
      <strong>Errors</strong>

      <p></p>

      <table class="table table-bordered table-hover table-condensed" id="errors">
      </table>
    </div>
  </div>
</div> <!-- /.row -->

<div class="row">
  <div class="text-center col-lg-12">
    <h2>Charts</h2>
  </div>
</div>

<div class="row">
  <div class="latency-histogram text-center col-lg-12"></div>
</div>

<div class="row">
  <div class="latency text-center col-lg-12"></div>
</div>

<div class="latency-legend"></div>

<div class="row">

</div>

<div class="row">
  <div class="concurrency text-center col-lg-12"></div>
</div>

<div class="row">
  <div class="rps-mean text-center col-lg-12"></div>
</div>
<div class="row">
  <div class="rps-count text-center col-lg-12"></div>
</div>

<div class="row">
  <div class="codes-line text-center col-lg-12"></div>
</div>
<div class="row">
  <div class="errors-line text-center col-lg-12"></div>
</div>


  


</div>

<div class="row">
  <div class="col-lg-8 col-lg-offset-2">
    <h3 class="text-center">Raw report data</h3>
    <p>This is the raw JSON stats output that the report was generated from.</p>
    <div id="editor">
    </div>
  </div>
</div>

<script>
var editor = ace.edit("editor");
editor.getSession().setMode("ace/mode/javascript");
editor.setValue(JSON.stringify(Report, null, 2));
editor.gotoLine(1);editor.setHighlightActiveLine(false);

var l = _;

$('#timestamp').html(moment(Report.aggregate.timestamp).format('DD MMM YYYY HH:mm:SS'));
$('#testDuration').html(l.size(Report.intermediate) * 10);
$('#scenariosCompleted').html(Report.aggregate.scenariosCompleted);
$('#scenariosCreated').html(Report.aggregate.scenariosCreated);

var markers = [];
if(l.size(Report.phases) > 0) {
  markers = l.foldl(Report.phases, function(acc, phase, index) {
    var label = phase.name || 'Phase ' + (index + 1);
    var timestamp = (index === 0) ? 0 : Report.phases[index - 1].duration + acc[index - 1].timestamp;

    acc.push({
      timestamp: timestamp,
      label: label
    });

    return acc;
  }, []);
}

if (l.size(Report.aggregate.scenarioCounts) > 0) {
  l.each(Report.aggregate.scenarioCounts, function(count, name) {
    var $tdName = $('<td>' + name + '</td>');
    var percentage = Math.round(count / Report.aggregate.scenariosCreated * 100 * 1000) / 1000;
    var $tdCount = $('<td>' + count + ' (' + percentage + '%)' + '</td>');
    var $el = $('<tr></tr>')
      .append($tdName)
      .append($tdCount)
      .appendTo($('#scenarioCounts'));
  });
} else {
  $('#scenarioCountsContainer').hide();
}

if (l.size(Report.aggregate.codes) > 0) {
  l.each(Report.aggregate.codes, function(count, code) {
    var anchor = '';
    if (code >= 100 && code < 200) {
      anchor = '#1xx_Informational';
    } else if (code >= 200 && code < 300) {
      anchor = '#2xx_Success';
    } else if (code >= 300 && code < 400) {
      anchor = '#3xx_Redirection';
    } else if (code >= 400 && code < 500) {
      anchor = '#4xx_Client_Error';
    } else if (code >= 500 && code < 600) {
      anchor = '#5xx_Server_Error';
    }

    var $a = $('<a>' + code + '</a>').attr('href', 'https://en.wikipedia.org/wiki/List_of_HTTP_status_codes' + anchor);
    var $td = $('<td></td>').append($a);
    var $el = $('<tr></tr>')
      .append($td)
      .append($('<td>' + count + '</td>'))
      .appendTo($('#codes'));
  });
} else {
  $('#codesContainer').hide();
}

if (l.size(Report.aggregate.errors) > 0) {
  l.each(Report.aggregate.errors, function(count, code) {
    var $el = $('<tr></tr>')
      .append($('<td>' + code + '</td>'))
      .append($('<td>' + count + '</td>'))
      .appendTo($('#errors'));
  });
} else {
  $('#errorsContainer > p').html('&#10004; Test completed without network or OS errors.');
}

var histogramData = l.map(Report.aggregate.latency, function(v, k) { return {bin: k, value: v} });

MG.data_graphic({
  chart_type: 'bar',
  x_label: 'Percentile',
  y_label: '(ms)',
  animate_on_load: true,
  title: 'Overall Latency Distribution',
  description: 'Distribution of all observed response latencies',
  target: '.latency-histogram',
  data: histogramData,
  x_accessor: 'bin',
  y_accessor: 'value',
  binned: true,
  height: 250,
  interpolate: 'monotone',
  padding_percentage: 0,
  bar_orientation: 'vertical',
  width: 450
});

var chartData = l.map(
  window.Report.intermediate,
  function(o,i) {
    return {
      timestamp: i*10+10,

      rpsMean: o.rps.mean,
      rpsCount: o.rps.count,
      concurrency: o.concurrency,
      latencyMax: o.latency.max,
      latencyp99: o.latency.p99,
      latencyp95: o.latency.p95,
      latencyMedian: o.latency.median,
      latencyMin: o.latency.min
    }
  });

//
// Response codes
//

if (l.size(Report.aggregate.codes) > 0) {
  var codesData = l.foldl(Report.intermediate, function(acc, o, i) {
    var res = {};
    res.timestamp = i*10+10;
    l.each(o.codes, function(count, code) {
      res[code] = count;
    });
    acc.push(res);
    return acc;
  }, []);
  var uniqueCodes = l.foldl(Report.intermediate, function(acc, o) {
    l.each(o.codes, function(count, code) {
      if (l.indexOf(acc, code) === -1) {
        acc.push(code);
      }
    });
    return acc;
  }, []);

  MG.data_graphic({
    x_label: 'Time',
    y_label: 'Count',
    title: 'HTTP codes',
    description: 'Occurence of HTTP response codes',
    target: '.codes-line',
    data: codesData,
    x_accessor: 'timestamp',
    y_accessor: uniqueCodes,
    legend: uniqueCodes,
    right: 50,
    chart_type: 'line',
    area: false,
    markers: markers,
    width: 900
  });
}

//
// Errors
//

if (l.size(Report.aggregate.errors) > 0) {
  var errorData = l.foldl(Report.intermediate, function(acc, o, i) {
    var res = {};
    res.timestamp = i*10+10;
    l.each(o.errors, function(count, name) {
      res[name] = count;
    });
    acc.push(res);
    return acc;
  }, []);
  var uniqueErrors = l.foldl(Report.intermediate, function(acc, o) {
    l.each(o.errors, function(count, name) {
      if (l.indexOf(acc, name) === -1) {
        acc.push(name);
      }
    });
    return acc;
  }, []);

  MG.data_graphic({
    title: 'Error Codes',
    description: 'Occurence of error codes',
    target: '.errors-line',
    data: errorData,
    x_accessor: 'timestamp',
    y_accessor: uniqueErrors,
    chart_type: 'line',
    area: false,
    markers: markers
  });

}

//
// Latency
//
MG.data_graphic({
  chart_type: 'line',
  x_label: 'Time',
  y_label: '(ms)',
  animate_on_load: true,
  area: false,
  title: "Latency At Intervals",
  description: "Latency values at different points during the test run",
  data: chartData,
  target: '.latency',
  width: 900,
  x_accessor: 'timestamp',
  y_accessor: ['latencyMin', 'latencyMedian', 'latencyp95', 'latencyMax'],
  legend: ['min', 'p50', 'p95', 'max'],
  //legend_target: '.latency-legend',
  right: 50,
  interpolate: 'monotone',
  mouseover: function(d, i) {
  },
  markers: markers
        });

            MG.data_graphic({
            animate_on_load: true,
            area: false,
            y_label: 'Count',
            x_label: 'Time',
            title: 'Concurrent users',
            description: 'Concurrent users',
            data: chartData,
            target: '.concurrency',
            x_accessor: 'timestamp',
            y_accessor: ['concurrency'],
            interpolate: 'monotone',
            markers: markers,
            width: 900
            });

MG.data_graphic({
  animate_on_load: true,
  area: false,
  y_label: 'Count',
  x_label: 'Time',
  title: 'Mean RPS',
  description: 'Mean requests per second',
  data: chartData,
  target: '.rps-mean',
  x_accessor: 'timestamp',
  y_accessor: ['rpsMean'],
  interpolate: 'monotone',
  markers: markers,
  width: 900
});

MG.data_graphic({
  animate_on_load: true,
  area: false,
  y_label: 'Count',
  x_label: 'Time',
  title: 'RPS Count',
  description: 'Count of requests per second',
  data: chartData,
  target: '.rps-count',
  x_accessor: 'timestamp',
  y_accessor: ['rpsCount'],
  interpolate: 'monotone',
  markers: markers,
  width: 900
});
</script>
<div id="footer">
  <footer>This report was created with <a href="https://artillery.io">Artillery</a> - free open-source load-testing for HTTP and WebSockets</footer>
</div>
</body>
</html>
